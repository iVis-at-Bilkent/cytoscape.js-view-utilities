!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("geometric")):"function"==typeof define&&define.amd?define(["geometric"],t):"object"==typeof exports?exports.cytoscapeViewUtilities=t(require("geometric")):e.cytoscapeViewUtilities=t(e.geometric)}(window,(function(e){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var i;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){"use strict";var r=function(e){if(e){var t={highlightStyles:[],selectStyles:{},setVisibilityOnHide:!1,setDisplayOnHide:!0,zoomAnimationDuration:1500,neighbor:function(e){return!1},neighborSelectTime:500,lassoStyle:{lineColor:"#d67614",lineWidth:3}},i=n(1),r=n(2);e("core","viewUtilities",(function(e){var n=this;function l(e){return e.scratch("_viewUtilities")||e.scratch("_viewUtilities",{}),e.scratch("_viewUtilities")}if("get"===e)return l(n).instance;t=function e(t){t=t||{};for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)i.hasOwnProperty(r)&&(Array.isArray(i[r])?t[r]=i[r].slice():"object"===o(i[r])?t[r]=e(t[r],i[r]):t[r]=i[r])}return t}({},t,e);var s=r(n,t);if(n.undoRedo){var u=n.undoRedo(null,!0);i(n,u,s)}if(l(n).instance=s,!l(n).initialized){l(n).initialized=!0;var a=!1;document.addEventListener("keydown",(function(e){"Shift"==e.key&&(a=!0)})),document.addEventListener("keyup",(function(e){"Shift"==e.key&&(a=!1)})),n.on("taphold","node",(function(e){var i,o=e.target||e.cyTarget,r=!1,l=setTimeout((function(){a&&(n.elements().unselect(),(i=t.neighbor(o))&&i.select(),o.lock(),r=!0)}),t.neighborSelectTime-500);n.on("free","node",(function(){var t=e.target||e.cyTarget;o==t&&!0===r?(r=!1,i&&i.select(),o.unlock()):clearTimeout(l)})),n.on("drag","node",(function(){var t=e.target||e.cyTarget;o==t&&!1===r&&clearTimeout(l)}))}))}return l(n).instance}))}};e.exports&&(e.exports=r),void 0===(i=function(){return r}.call(t,n,t,e))||(e.exports=i),"undefined"!=typeof cytoscape&&r(cytoscape)}()},function(e,t){function n(e,t,n){function i(t){t=t||e.elements();for(var i=n.getAllHighlightClasses(),o=[],r=0;r<i.length;r++)o.push(t.filter(".".concat(i[r],":visible")));var l=i.map((function(e){return"."+e})).join(",");return o.push(t.filter(":visible").not(l)),o}function o(e){for(var t=e.current,i=[],o=0;o<e.length-1;o++)i.push(n.highlight(e[o],o));return i.push(n.removeHighlights(e[e.length-1])),i.current=t,i}function r(e){return function(t){var o=i();return t.firstTime?n[e](t.eles,t.idx):function(e){for(var t=e.current,i=[],o=0;o<t.length-1;o++)i.push(n.highlight(t[o],o));i.push(n.removeHighlights(t[t.length-1])),i.current=t}(t),o.current=i(),o}}t.action("highlightNeighbors",r("highlightNeighbors"),o),t.action("highlight",r("highlight"),o),t.action("removeHighlights",r("removeHighlights"),o)}e.exports=function(e,t,i){n(e,t,i),function(e,t,n){function i(e){return n.show(e)}function o(e){return n.hide(e)}t.action("show",i,o),t.action("hide",o,i),t.action("showHiddenNeighbors",(function(e){return n.showHiddenNeighbors(e)}),o)}(0,t,i)}},function(e,t,n){e.exports=function(e,t){var i=[],o=0,r=!1,l=!1,s=!1;function u(){t.selectStyles.node&&e.style().selector("node:selected").css(t.selectStyles.node).update(),t.selectStyles.edge&&e.style().selector("edge:selected").css(t.selectStyles.edge).update()}function a(n){var o=i[n],r=t.highlightStyles[n].node,l=t.highlightStyles[n].edge;e.style().selector("node."+o).css(r).update(),e.style().selector("edge."+o).css(l).update()}function c(n,o){e.startBatch();for(var r=0;r<t.highlightStyles.length;r++)n.removeClass(i[r]);n.addClass(i[o]),n.unselect(),e.endBatch()}function h(e){return e.add(e.descendants()).closedNeighborhood()}!function(){for(var e=0;e<t.highlightStyles.length;e++){var n="__highligtighted__"+o;i.push(n),o++,a(e)}u(),document.addEventListener("keydown",(function(e){"Control"!=e.key&&"Shift"!=e.key&&"Meta"!=e.key||("Control"==e.key||"Meta"==e.key?s=!0:"Shift"==e.key&&(l=!0),s&&l&&!r&&(f.enableMarqueeZoom(),r=!0))})),document.addEventListener("keyup",(function(e){"Control"!=e.key&&"Shift"!=e.key&&"Meta"!=e.key||("Shift"==e.key?l=!1:"Control"!=e.key&&"Meta"!=e.key||(s=!1),!r||l&&s||(f.disableMarqueeZoom(),r=!1))}))}();var d,g,f={};f.hide=function(e){return(e=(e=e.filter(":visible")).union(e.connectedEdges())).unselect(),t.setVisibilityOnHide&&e.css("visibility","hidden"),t.setDisplayOnHide&&e.css("display","none"),e},f.show=function(e){var n=(e=e.not(":visible")).connectedEdges((function(t){return!(!t.source().visible()&&!e.contains(t.source())||!t.target().visible()&&!e.contains(t.target()))}));return(e=e.union(n)).unselect(),t.setVisibilityOnHide&&e.css("visibility","visible"),t.setDisplayOnHide&&e.css("display","element"),e},f.showHiddenNeighbors=function(e){return this.show(h(e))},f.highlight=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return c(e,t),e},f.getHighlightStyles=function(){return t.highlightStyles},f.highlightNeighbors=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.highlight(h(e),t)},f.removeHighlights=function(n){e.startBatch(),null!=n&&null!=n.length||(n=e.elements());for(var o=0;o<t.highlightStyles.length;o++)n.removeClass(i[o]);return e.endBatch(),n},f.isHighlighted=function(e){for(var n=!1,o=0;o<t.highlightStyles.length;o++)e.is("."+i[o]+":visible")&&(n=!0);return n},f.changeHighlightStyle=function(e,n,i){t.highlightStyles[e].node=n,t.highlightStyles[e].edge=i,a(e),u()},f.addHighlightStyle=function(e,n){var r={node:e,edge:n};t.highlightStyles.push(r);var l="__highligtighted__"+o;i.push(l),o++,a(t.highlightStyles.length-1),u()},f.removeHighlightStyle=function(n){n<0||n>t.highlightStyles.length-1||(e.elements().removeClass(i[n]),t.highlightStyles.splice(n,1),i.splice(n,1))},f.getAllHighlightClasses=function(){for(var e=[],n=0;n<t.highlightStyles.length;n++)e.push(i[n]);return i},f.zoomToSelected=function(n){var i,o=n.boundingBox(),r=Math.abs(o.x1-o.x2),l=Math.abs(o.y1-o.y2);return i=r>=200||l>=200?50:e.width()<e.height()?(200-r)/2*e.width()/200:(200-l)/2*e.height()/200,e.animate({fit:{eles:n,padding:i}},{duration:t.zoomAnimationDuration}),n},f.enableMarqueeZoom=function(n){var i,o,s,u;r=!0,e.autounselectify(!0),e.one("tapstart",d=function(e){1==l&&(i=e.position.x,o=e.position.y,s=void 0)}),e.one("tapend",g=function(r){if(s=r.position.x,u=r.position.y,null==i||null==s)return e.autounselectify(!1),void(n&&n());if(i>s){var l=i;i=s,s=l}if(o>u){l=o;o=u,u=l}var a;s-i<200&&(i-=a=(200-(s-i))/2,s+=a);u-o<200&&(o-=a=(200-(u-o))/2,u+=a);if(i>e.elements().boundingBox().x2||s<e.elements().boundingBox().x1||o>e.elements().boundingBox().y2||u<e.elements().boundingBox().y1)return e.autounselectify(!1),void(n&&n());var c=Math.min(e.width()/Math.abs(s-i),e.height()/Math.abs(u-o)),h=e.width()/2-(e.pan().x+c*(i+s)/2),d=e.height()/2-(e.pan().y+c*(o+u)/2);e.animate({panBy:{x:h,y:d},zoom:c,duration:t.zoomAnimationDuration,complete:function(){n&&n(),e.autounselectify(!1)}})})},f.disableMarqueeZoom=function(){e.off("tapstart",d),e.off("tapend",g),e.autounselectify(!1),r=!1};var y=n(3);return f.changeLassoStyle=function(e){e.lineWidth&&(t.lassoStyle.lineWidth=e.lineWidth),e.lineColor&&(t.lassoStyle.lineColor=e.lineColor)},f.enableLassoMode=function(n){var i=!1,o=document.createElement("canvas");o.id="lasso-canvas";var r=e.container();r.appendChild(o);var l=r.offsetWidth,s=r.offsetHeight;o.width=l,o.height=s,o.setAttribute("style","z-index: 1000; position: absolute; top: 0; left: 0;"),e.panningEnabled(!1),e.zoomingEnabled(!1),e.autounselectify(!0);var u=[];o.onclick=function(l){if(0==i){i=!0;var s=o.getContext("2d");s.strokeStyle=t.lassoStyle.lineColor,s.lineWidth=t.lassoStyle.lineWidth,s.lineJoin="round",e.panningEnabled(!1),e.zoomingEnabled(!1),e.autounselectify(!0);var a=l.offsetX,c=l.offsetY;u.push([a,c]),o.onmouseleave=function(t){i=!1,r.removeChild(o),o=null,e.panningEnabled(!0),e.zoomingEnabled(!0),e.autounselectify(!1),n&&n()},o.onmousemove=function(e){s.beginPath(),u.push([e.offsetX,e.offsetY]),s.moveTo(a,c),s.lineTo(e.offsetX,e.offsetY),a=e.offsetX,c=e.offsetY,s.stroke(),s.closePath()}}else{var h=e.elements();u.push(u[0]);for(var d=0;d<h.length;d++)if(h[d].isEdge()){var g=[h[d].sourceEndpoint().x*e.zoom()+e.pan().x,h[d].sourceEndpoint().y*e.zoom()+e.pan().y],f=[h[d].targetEndpoint().x*e.zoom()+e.pan().x,h[d].targetEndpoint().y*e.zoom()+e.pan().y];y.pointInPolygon(g,u)&&y.pointInPolygon(f,u)&&h[d].select()}else{e.autounselectify(!1);var p=[[h[d].renderedBoundingBox().x1,h[d].renderedBoundingBox().y1],[h[d].renderedBoundingBox().x1,h[d].renderedBoundingBox().y2],[h[d].renderedBoundingBox().x2,h[d].renderedBoundingBox().y2],[h[d].renderedBoundingBox().x2,h[d].renderedBoundingBox().y1]];(y.polygonIntersectsPolygon(p,u)||y.polygonInPolygon(p,u)||y.polygonInPolygon(u,p))&&h[d].select()}i=!1,r.removeChild(o),o=null,e.panningEnabled(!0),e.zoomingEnabled(!0),n&&n()}}},f.disableLassoMode=function(){var t=document.getElementById("lasso-canvas");t&&(t.parentElement.removeChild(t),t=null),e.panningEnabled(!0),e.zoomingEnabled(!0),e.autounselectify(!1)},f}},function(t,n){t.exports=e}])}));